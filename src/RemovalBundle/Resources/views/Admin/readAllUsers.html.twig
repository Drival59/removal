{% extends 'base.html.twig' %}
{% block body %}
    <h2>Liste des utilisateurs au grade Guilde <span><a href="{{ path('removal_admin_delete_status') }}"> <span class="glyphicon glyphicon-warning-sign" data-toggle="tooltip" title="Supprimer"></span></a></span></h2><br>
    <table class="table">
    <tr>
        <th>Nom Utilisateur</th>
        <th>Role</th>
        <th>Participations</th>
        <th>Status Participation</th>
        <th>Modification</th>
    </tr>
{% for users in users %}
    {% if users.roles[0] == "ROLE_GUILDE" %}
    <tr>
        <td>{{ users.username }}</td>
        <td>
    {% for role in users.roles %}
        <p>{{ role }}</p>
        {% endfor %}
        </td>
        <td>
    {% for participation in users.participations %}
        <p>{{ participation.nomParticipation }}</p>
        {% endfor %}
        </td>
        <td>
            {% if users.status == true and users.status != null %}
                <p>Participation envoyée !</p>
            {% else %}
                <p>Participation non envoyée !</p>
                {% endif %}
            {% if users.status != null and users.status.confirmation != null %}
                    <p>Confirmation Envoyée !</p>
            {% endif %}
        </td>
        <td><a href="{{ path('removal_admin_edit_user', {'userID' : users.id}) }}"> <span class="glyphicon glyphicon-pencil" data-toggle="tooltip" title="Édition"></span></a>
            {% if users.status == true and users.status != null %}
                <a href="{{ path('removal_admin_delete_one_status', {'userID' : users.status.id}) }}"> <span class="glyphicon glyphicon-warning-sign" data-toggle="tooltip" title="Supprimer"></span></a>
            {% if users.status.confirmation == null %}
                <a href="{{ path('removal_admin_confirm_one_status', {'statusID' : users.status.id}) }}"> <span class="glyphicon glyphicon-ok" data-toggle="tooltip" title="Confirmer"></span></a>
                {% endif %}
            {% endif %}</td>
    </tr>
    {% endif %}
{% endfor %}
    </table><br><br>
    <h2>Liste des utilisateurs au grade User</h2><br>
    <table class="table">
        <tr>
            <th>Nom Utilisateur</th>
            <th>Role</th>
            <th>Participations</th>
            <th>Status Participation</th>
            <th>Modification</th>
        </tr>
        {% for users in users %}
            {% if users.roles[0] == "ROLE_USER" %}
                <tr>
                    <td>{{ users.username }}</td>
                    <td>
                        {% for role in users.roles %}
                            <p>{{ role }}</p>
                        {% endfor %}
                    </td>
                    <td>
                        {% for participation in users.participations %}
                            <p>{{ participation.nomParticipation }}</p>
                        {% endfor %}
                    </td>
                    <td>
                        {% if users.status == true and users.status != null %}
                            <p>Participation envoyée !</p>
                        {% else %}
                            <p>Participation non envoyée !</p>
                        {% endif %}
                        {% if users.status != null and users.status.confirmation != null %}
                            <p>Confirmation Envoyée !</p>
                        {% endif %}
                    </td>
                    <td><a href="{{ path('removal_admin_edit_user', {'userID' : users.id}) }}"> <span class="glyphicon glyphicon-pencil" data-toggle="tooltip" title="Édition"></span></a>
                        {% if users.status == true and users.status != null %}
                            <a href="{{ path('removal_admin_delete_one_status', {'userID' : users.status.id}) }}"> <span class="glyphicon glyphicon-warning-sign" data-toggle="tooltip" title="Supprimer"></span></a>
                            {% if users.status.confirmation == null %}
                                <a href="{{ path('removal_admin_confirm_one_status', {'statusID' : users.status.id}) }}"> <span class="glyphicon glyphicon-ok" data-toggle="tooltip" title="Confirmer"></span></a>
                            {% endif %}
                        {% endif %}</td>
                </tr>
            {% endif %}
        {% endfor %}
    </table>





{% endblock %}












{% block javascripts %}
    <script>
        $(document).ready(function(){
            $('[data-toggle="tooltip"]').tooltip();
        });
    </script>
{% endblock %}