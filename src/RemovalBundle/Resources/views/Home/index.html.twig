{% extends 'base.html.twig' %}
{% block stylesheets %}
  <link rel="stylesheet" href="{{ asset('css/style-home.css') }}">
{% endblock %}

{% block body %}
  <div class="container-fluid">

  <div id="removalDown">
    {% for raidInProgress in raidsInProgress %}
      <table class="table">
        <h4 class="recrutement">{{ raidInProgress.name }}</h4>
        <thead class="thead-dark">
          <tr>
            <th>Boss</th>
            <th>NM</th>
            <th>HM</th>
            <th>MM</th>
          </tr>
        </thead>
        {% for bossdown in bossdowns %}
          {% if bossdown.raid.id == raidInProgress.id %}
            <tr>
              <td><img src="{{ asset('images/boss/' ~ bossdown.imageUrl) }}" alt="{{ bossdown.name }}" title="{{ bossdown.name }}" width="60px" height="30px"/></td>
              <td>
                {% if bossdown.nm == 1 %}
                  <i class="fas fa-check"></i>
                {% else %}
                  <i class="fas fa-times"></i>
                {% endif %}
              </td>
              <td>
                {% if bossdown.hm == 1 %}
                  <i class="fas fa-check"></i>
                {% else %}
                  <i class="fas fa-times"></i>
                {% endif %}
              </td>
              <td>
                {% if bossdown.mm == 1 %}
                  <i class="fas fa-check"></i>
                {% else %}
                  <i class="fas fa-times"></i>
                {% endif %}
              </td>
            </tr>
          {% endif %}
        {% endfor %}

      </table>
    {% endfor %}
    <br>
      <table id="table_recrutement" class="table">
        <thead class="thead-dark">
        <tr>
          <p class="recrutement">Recrutement</p>
        </tr>
        <tr>
          <th>Icon</th>
          <th>Classe</th>
          <th>Niveau</th>
            {% if is_granted('ROLE_ADMIN') %}
              <th>Modification</th>
            {% endif %}
        </tr>
        </thead>
          {% for classe in recrutement %}
            <tr>
              <td class="align-middle">
                <img class="icon_class" src="{{ asset('images/recrutement/' ~ classe.image) }}" alt="">
              </td>
              <td class="align-middle">
                  {{ classe.classe }}
              </td>
                {% if classe.niveau == "Basse" %}
                  <td style="color: aquamarine" class="align-middle">
                      {{ classe.niveau }}
                  </td>
                    {% elseif classe.niveau == "Urgent" %}
                      <td style="color: #C82829" class="align-middle">
                          {{ classe.niveau }}
                      </td>
                    {% elseif classe.niveau == "Moyenne" %}
                      <td style="color: #ffe400" class="align-middle">
                          {{ classe.niveau }}
                      </td>
                    {% elseif classe.niveau == "Haute" %}
                      <td style="color: #fc7904" class="align-middle">
                          {{ classe.niveau }}
                      </td>
                {% endif %}
                {% if is_granted('ROLE_ADMIN') %}
                  <td>
                    <a href="{{ path('removal_admin_update_recrutement', {'recrutementID' : classe.id}) }}"> <span class="fas fa-pencil-alt" data-toggle="tooltip" title="Édition"></span></a>
                  </td>
                {% endif %}
            </tr>
          {% endfor %}
      </table>
    <br>
  </div>

  <div id="removal-CarouselNews">
    <div id="removal-carousel" class="carousel slide" data-ride="carousel">
      <ol class="carousel-indicators">
        <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
        <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
      </ol>
      <div class="carousel-inner">
        <div class="carousel-item active">
          <img class="d-block w-100" src="http://i.imgur.com/wzo8Khn.jpg" alt="First slide">
          <div class="carousel-caption d-none d-md-block">
            <h5>WOW</h5>
            <p>C'est la vie</p>
          </div>
        </div>
        <div class="carousel-item">
          <img class="d-block w-100" src="https://i.ytimg.com/vi/K1TC89bLzC4/maxresdefault.jpg" alt="Second slide">
          <div class="carousel-caption d-none d-md-block">
            <h5>WOW</h5>
            <p>C'est la vie</p>
          </div>
        </div>
      </div>
      <a class="carousel-control-prev" href="#removal-carousel" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#removal-carousel" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>

    {% for new in news %}

        <div class="removalNews">
          <div class="removalNewsImg">
            <a href="{{ path('removal_news_read', {'newsUrl' : new.url})}}"><img src="{{ asset('images/news/' ~ new.imageUrl) }}" alt="lol" width="100%" height="100%"/></a>
          </div>

        {% set countComment = 0 %}
        {% for comment in comments %}
          {% if comment.news.id == new.id %}
            {% set countComment = countComment + 1 %}
          {% endif %}
        {% endfor %}

        <div class="removalNewsContent">
          <h3>
            <a href="{{ path('removal_news_read', {'newsUrl' : new.url})}}">{{ new.title }}</a>
            <i class="far fa-comment-alt" style="float:right">
            {{ countComment }}
            </i>
          </h3>
          <i>Écrit par <a href="{{ path('removal_joueur_read_all', {'joueurID' : new.utilisateur.id}) }}">{{ new.utilisateur.username }}</a> le {{ new.dateNews|date('d/m/Y à H:i') }}</i>
          <hr />
          <p>{{ new.description }}</p>
        </div>
      </div>

    {% endfor %}
    <button id="moreNews" type="button" class="btn btn-removal btn-lg" style="margin-top:50px;">Afficher plus d'actualités</button>
  </div>


  <div class="removal-widgets">
    <h4>Recrutement</h4>
    <div id="removal-recruitement">
      <p>Viens remplir ton formulaire ici !</p>
      <button type="button" class="btn btn-removal btn-lg">Rejoins-nous</button>
    </div>

    <h4>Qui sommes-nous</h4>
    <div id="removal-description">
      <p>Fidèle au Royaume KirinTor-Horde, la guilde Removal prouve depuis maintenant 8 ans qu'il est possible de progresser sur des paliers PvE dans une communauté stable et structurée. Alors que l'assaut sur les Îles Inexplorées fait rage entre la Horde et l'Alliance, notre guilde aura plus que jamais besoin du soutien de combattants hors pairs comme vous, pour démontrer notre force et notre potentiel à nos alliés Zandalari. Petit à petit, notre réputation sera marquée au fer rouge sur nos adversaires lors de nos raids, pour que notre ascension mythique soit inflexible. Si vous pensez être à la hauteur, motivés et fidèles aux couleurs de la Horde, alors Removal pourra vous ouvrir ses portes sur les instances qui n'attendent plus que vous.
      </p>
    </div>
  </div>
  </div>
{% endblock %}


{% block javascripts %}
  <script src="{{ asset('js/removal-home.js')}}"></script>
{% endblock %}
